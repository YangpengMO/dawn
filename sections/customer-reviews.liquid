{% stylesheet %}
.customer-reviews-carousel {
  position: relative;
  padding: 40px 0;
  text-align: center;
}
.review-slide {
  display: none;
  max-width: 600px;
  margin: 0 auto;
  background: #f9f9f9;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}
.review-slide.active {
  display: block;
}
.review-stars {
  color: #f5a623;
  font-size: 20px;
  margin-bottom: 10px;
}
.review-text {
  font-size: 18px;
  color: #333;
  margin-bottom: 12px;
}
.review-author {
  font-size: 14px;
  color: #777;
}
.review-dots {
  margin-top: 16px;
}
.review-dots span {
  cursor: pointer;
  font-size: 20px;
  color: #ccc;
  padding: 0 5px;
}
.review-dots span.active {
  color: #333;
}
.more-reviews-btn {
  margin-top: 24px;
  display: inline-block;
  background: #333;
  color: #fff;
  padding: 10px 20px;
  border-radius: 6px;
  text-decoration: none;
}
{% endstylesheet %}

<div class="customer-reviews-carousel" id="customer-reviews-carousel">
  {% for block in section.blocks %}
    <div class="review-slide{% if forloop.first %} active{% endif %}">
      <div class="review-stars">⭐⭐⭐⭐⭐</div>
      <div class="review-text">{{ block.settings.text }}</div>
      <div class="review-author">– {{ block.settings.author }}</div>
    </div>
  {% endfor %}

  <div class="review-dots">
    {% for block in section.blocks %}
      <span class="{% if forloop.first %}active{% endif %}" onclick="showReviewSlide({{ forloop.index0 }})">●</span>
    {% endfor %}
  </div>

  {% if section.settings.button_label != blank and section.settings.button_link != blank %}
    <a class="more-reviews-btn" href="{{ section.settings.button_link }}">{{ section.settings.button_label }}</a>
  {% endif %}
</div>

<script>
  const slides = document.querySelectorAll('#customer-reviews-carousel .review-slide');
  const dots = document.querySelectorAll('#customer-reviews-carousel .review-dots span');
  let current = 0;

  function showReviewSlide(index) {
    slides[current].classList.remove('active');
    dots[current].classList.remove('active');
    slides[index].classList.add('active');
    dots[index].classList.add('active');
    current = index;
  }
</script>

{% schema %}
{
  "name": "Customer Reviews Carousel",
  "settings": [
    {
      "type": "text",
      "id": "button_label",
      "label": "More Reviews Button Text",
      "default": "Read More Reviews"
    },
    {
      "type": "text",
      "id": "button_link",
      "label": "Button Link URL",
      "default": "/collections/all"
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "textarea",
          "id": "text",
          "label": "Review Text",
          "default": "My cat sleeps better than I do now!"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Reviewer Name",
          "default": "Verified Buyer"
        }
      ]
    }
  ],
  "max_blocks": 6,
  "presets": [
    {
      "name": "Customer Reviews Carousel",
      "category": "Testimonials",
      "blocks": [
        {
          "type": "review",
          "settings": {
            "text": "I purchased this cat bed for my furry friend, and it exceeded all my expectations! The material is incredibly soft and cushy, and my cat immediately took a liking to it — she hasn't wanted to leave since. It’s sturdy and well-constructed, so I’m not worried about it collapsing even with her jumping in and out. Cleaning is a breeze since the cover is removable and machine washable. Plus, the design is stylish enough to blend seamlessly with my home décor. I’m definitely planning to buy more products from this store in the future!",
            "author": "Emily R."
          }
        },
        {
          "type": "review",
          "settings": {
            "text": "Fast shipping and the product looks great in my living room.",
            "author": "Jason M."
          }
        },
        {
          "type": "review",
          "settings": {
            "text": "Durable and well-made. Our kitten uses it every day.",
            "author": "Verified Buyer"
          }
        }
      ]
    }
  ]
}
{% endschema %}
