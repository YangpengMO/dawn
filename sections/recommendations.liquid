{% assign recommended_products = product.metafields.custom.recommendations.value %}

{% if recommended_products and recommended_products.size > 0 %}
  <div class="recommended-products" style="margin-top: 48px;">
    <h2 style="font-size: 24px; margin-bottom: 20px;">You May Also Like</h2>

    <div style="
      display: flex;
      gap: 16px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      -webkit-overflow-scrolling: touch;
      padding-bottom: 8px;
    ">
      {% for related_product in recommended_products %}
<p style="font-size: 12px; color: #888;">
  ID: {{ related_product.id }} |
  Title: {{ related_product.title }} |
  Image: {{ related_product.featured_image | image_url }}
</p>

        <div style="
          flex: 0 0 auto;
          width: 220px;
          scroll-snap-align: start;
          border: 1px solid #eee;
          border-radius: 12px;
          padding: 12px;
          background: #fff;
          box-shadow: 0 2px 6px rgba(0,0,0,0.05);
          text-align: center;
        ">
          <a href="{{ related_product.url }}" style="text-decoration: none; color: inherit; display: block;">
            {% if related_product.featured_image %}
              <img
                src="{{ related_product.featured_image | image_url: width: 400 }}"
                alt="{{ related_product.title | escape }}"
                style="width: 100%; border-radius: 8px; margin-bottom: 8px;"
              >
            {% endif %}
            <p style="font-size: 16px; margin: 4px 0;">{{ related_product.title }}</p>
            {% if related_product.price %}
              <p style="font-weight: 600; color: #333; font-size: 14px;">{{ related_product.price | money }}</p>
            {% endif %}
            <span style="
              display: inline-block;
              margin-top: 8px;
              padding: 6px 12px;
              font-size: 14px;
              background-color: #f5f5f5;
              border-radius: 6px;
              transition: background 0.2s;
            ">View Product</span>
          </a>
        </div>
      {% endfor %}
    </div>
  </div>
{% endif %}

{% schema %}
{
  "name": "Recommendations",
  "tag": "section",
  "settings": [],
  "presets": [
    {
      "name": "Recommendations",
      "category": "Custom"
    }
  ]
}
{% endschema %}
